import java.io.File;
import java.nio.file.Files;
import java.nio.file.FileSystems;
import java.nio.file.Paths;

apply plugin: 'java'

sourceCompatibility = 1.8

tasks.withType(JavaCompile){
   options.encoding = 'UTF-8'
}

tasks.withType(Javadoc){
   options.encoding = 'UTF-8'
}

javadoc{
   options.charSet = 'UTF-8'
}

repositories {
   mavenCentral()
}

dependencies {
  compile group: 'org.apache.kafka', name: 'kafka_2.12', version: '1.1.0'

  File libsFolder = new File("libs")
  for(File jar : libsFolder.listFiles()) {
    compile files(jar.getAbsolutePath())
  }
}

jar {
  configurations.compile.each { File path ->
    String buildJarFolder = "build/lib"
    if (!new File(buildJarFolder).exists()) {
      new File(buildJarFolder).mkdirs();
    }
    
    String newJarFilePath = buildJarFolder + "/" + path.name
    if (!new File(newJarFilePath).exists()) {
      Files.copy(path.toPath(), FileSystems.getDefault().getPath(newJarFilePath))
    }
  }
}
